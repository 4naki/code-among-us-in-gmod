@name Among Us Role System
@persist Players:array BaseVal Impostor1:entity Impostor2:entity Rand1 Rand2 Val1 Val2
#teams
@persist Crewmates:array Impostors:array
interval(250)
if(first()){
    Players=players()
    
    Crewmates=array()
    Impostors=array()
    
    timer("start",500)
}

if(clk("start")){
    if(Impostor1&Impostor2){
        
        #debug
        ##[
        printTable(Crewmates)
        printTable(Impostors)
        #]#
    }else{
    
        timer("susfinder",500)
        
        #debug
        ##[
        print("selecting sussy people")
        print(Val1)
        print(Val2)
        #]#
    }
}

if(clk("susfinder")){
Rand1=randint(1,Players:count())
Rand2=randint(1,Players:count())

Val1=Rand1

if(Rand2==Rand1){
    if(Rand1>Players:count()-2){
        Val2=Rand2-1
    }elseif(Rand1<3){
        Val2=Rand2+1
    }else{
        Val2=Rand2+randint(1,3)|-randint(1,3)
    }
}else{
    Val2=Rand2
}
Impostor1=Players[Val1,entity]
Impostor2=Players[Val2,entity]

foreach(I,E:entity=Players){
    if(!(E==Impostor1|E==Impostor2)){
        #Crewmate
        Crewmates:pushEntity(E)
    }else{
        #Impostor
        Impostors:pushEntity(E)
    }
}
#recheck (doesn't find anything at first check, this fixes it for now, and simply just works as a recheck)
timer("start",500)
}
